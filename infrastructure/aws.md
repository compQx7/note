ACL

# 可用性とスケーラビリティ
ひとつのリージョンに複数のアベイラビリティゾーンが存在する。

# CloudFormation
## template
テンプレート内のリソース定義の順序は、一般的には重要ではないが、明示的な依存関係が必要な場合、DependsOn属性を使用してリソース間の依存関係を定義することができる。これにより、特定のリソースが他のリソースの作成または更新が完了するまで待機するように指定できる。

主要構成
```yaml
AWSTemplateFormatVersion: '2010-09-09' # CloudFormationテンプレートのバージョン
Description: A simple AWS CloudFormation template for an EC2 instance # テンプレートの説明

Resources: # AWSリソースの定義
  MyEC2Instance: # リソースの論理名（一意）
    Type: AWS::EC2::Instance # リソースのタイプ
    Properties: # リソースのプロパティ
      ImageId: ami-0abcdef1234567890 # EC2インスタンスのAMI ID
      InstanceType: t2.micro # EC2インスタンスタイプ
```

応用例
```yaml
AWSTemplateFormatVersion: '2010-09-09'
Description: Advanced CloudFormation template example

Parameters: # ユーザーからの入力を受け取るためのパラメータ
  InstanceType: 
    Description: EC2 Instance Type
    Type: String
    Default: t2.micro

Mappings: # 固定データを定義するためのマッピング
  RegionAMIMap: 
    us-west-1: 
      AMI: ami-0abcdef1234567890
    us-east-1: 
      AMI: ami-0987654321abcdef

Conditions: # 特定の条件に基づいてリソースの作成や設定を変更するための条件
  CreateProdResources: !Equals [ !Ref EnvType, "prod" ]

Resources:
  MyEC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: !Ref InstanceType
      ImageId: !FindInMap [ RegionAMIMap, !Ref "AWS::Region", AMI ]
      SubnetId: !Ref MySubnet
    DependsOn: MySubnet # このEC2インスタンスはMySubnetの作成を待つ

  MySubnet:
    Type: AWS::EC2::Subnet
    Condition: CreateProdResources # このサブネットはEnvTypeが"prod"の場合のみ作成
    Properties:
      ...

Outputs: # テンプレートの出力値を定義
  InstanceId:
    Description: The Instance ID
    Value: !Ref MyEC2Instance
```

## stack
## リソース
リソースのタイプは「AWS::サービス名::リソースタイプ」という形式で表現される。
カスタムリソースを使用する場合、"Custom::MyCustomResourceName" のように "Custom" で始まるリソースタイプが使用されることもある。

# S3
## バケット
## オブジェクト

# IAM（Identity and Access Management）
ルートユーザーはすべての権限を持つアカウントで普段使いは参照されていない。それ以外の日常作業用ユーザーがIAMユーザー。
AWSリソースへのアクセスを管理するためのシステム。認証・認可の機能を持つ。

IAMポリシーは認可を扱う。
どんな条件で、誰が、どのリソースに、どんな操作をしてよいかを定義。
IAMユーザー、IAMグループにアタッチしたり、IAMロールにアタッチする。

IAMロールはIAMユーザーやIAMグループには紐づかない。
一時的なセキュリティ認証情報を取得するときに利用。

IAMやSTSでリソース間のアクセス許可にも使う。
IAMロールにポリシーをアタッチして、STSに一時的な鍵を払いださせることで、一時的に許可する仕組みを作る。

## IAM ユーザー
- **用途**: 個々の人物またはサービスを識別するために使用されます。各ユーザーには独自の認証情報があり、特定のAWSリソースへのアクセスを許可することができます。
- **設定例**: 新しい社員にIAMユーザーアカウントを作成し、ユーザー名とパスワードを提供します。必要に応じて、多要素認証（MFA）を有効にすることもできます。

## IAM グループ
- **用途**: 複数のユーザーを管理するために使用されます。グループにはポリシーを割り当てることができ、そのグループに属するすべてのユーザーにそのポリシーが適用されます。
- **設定例**: 「開発者」というグループを作成し、そのグループに特定のEC2インスタンスとS3バケットへのアクセス権限を持つポリシーを割り当てます。その後、開発チームのメンバーをこのグループに追加します。

## IAM ロール
- **用途**: AWSサービスまたはアカウントに一時的なアクセス権を付与するのに使用されます。ロールはユーザーとは異なり、誰がそれを使用するかを定義せず、必要な時に関連するエンティティ（人またはサービス）が仮想的に「ロールを引き受ける」ことができます。
あるAWSリソースが他のAWSサービスやリソースに代わって動作するための権限を設定するために使用される。
- **設定例**: EC2インスタンスにロールを割り当て、そのインスタンスがS3バケットにデータを保存できるようにします。このロールはEC2インスタンスにのみ適用され、他のユーザーやサービスはその権限を使用できません。

- **定義**: ロールは一連のアクセス許可を持つエンティティであり、このアクセス許可はポリシーによって定義されます。
- **割り当て**: ロールは直接ユーザーやグループに割り当てられるのではなく、「引き受けられます」。例えば、EC2インスタンスが特定のロールを引き受けて、そのロールに関連付けられたポリシーに基づいてS3バケットにアクセスするという使い方をします。また、あるAWSアカウントのユーザーが別のアカウントのロールを引き受けて、そのアカウント内のリソースにアクセスすることもできます。
- **ロール**: ロールは「引き受けられる」ものであり、そのロールに関連付けられたポリシーによって特定のアクションやリソースへのアクセスが許可されます。ロールは直接ユーザーやグループに割り当てられるのではなく、ユーザーやサービスが特定の状況下でロールを引き受け、そのロールのアクセス権を使用します。

## IAM ポリシー
- **用途**: AWSリソースへのアクセス許可を定義するためのドキュメント。JSON形式で記述され、特定のアクション、リソース、効果（許可または拒否）を指定できます。
- **設定例**: 「ReadOnlyS3」というポリシーを作成し、これにS3バケットへの読み取り専用アクセス権限を付与します。このポリシーは、特定のユーザーやグループ、ロールに割り当てることができます。

- **定義**: ポリシーはJSON形式のドキュメントで、特定のアクションやリソースに対するアクセス許可を定義します。
- **割り当て**: ポリシーは直接ユーザーやグループ、またはロールに割り当てることができます。例えば、あるユーザーにS3バケットへの読み取り専用アクセスを許可するポリシーを割り当てる、または特定のグループにEC2インスタンスの管理権限を与えるポリシーを割り当てる、といった使い方をします。
- **ユーザーとグループ**: ユーザーやグループには直接ポリシーを割り当てることができ、これによって特定のAWSリソースへのアクセス権が与えられます。
