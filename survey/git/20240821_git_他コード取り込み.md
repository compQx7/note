# git 他コード取り込み

あるブランチの内容を別のブランチへ反映させる方法は幾つかあります。

## merge又はcherry-pick

ブランチにコミットされた内容を反映させる場合です。
普通のやり方で、コミットとして反映されます。

- 全てのコミットを反映する。  
git switch {反映先のブランチ}
git merge {反映元のブランチ}
- 単一のコミットのみを反映する。  
git switch {反映先のブランチ}
git cherry-pick {コミットID}

## stash

ブランチにコミットされていない内容を反映させる場合です。  
stashはコミット前の編集状態を保存します。要するに一時的なコミットです。  
反映結果はコミットではなくstashした時点の状態になります。(オプションでステージングの状態は変更出来る)

git switch {反映元のブランチ}
git stash pop save 
git switch {反映先のブランチ}
git stash pop stash@{0}
stashはステージングされたものやuntrackingなものを含めたりも出来ます。
適用の際もpopでなく他のコマンドもあります。
この辺はコマンドのオプションが多いのでGUIからやったほうが楽でしょう。

※ 参考: 間違ったブランチでの作業を本来のブランチに移動させる

## patch

git switch {反映元のブランチ}
git diff > 変更.patch
git switch {反映先のブランチ}
git apply 変更.patch
要するにpatchなのでmerge/cherry-pick/stashと違ってリポジトリに依存しません。  
従って異なるディレクトリにcloneしたブランチでも、異なるリポジトリ間でも可能です。  
例えば、ある顧客のリポジトリでやった内容を別の顧客やベースのリポジトリに反映させるとか。
反映結果はコミットではなくアンステージドな状態です。

因みに
git diff {コミットID} とすれば 指定したコミットIDから現時点迄の差分となります。
git diff {コミットID:A}..{コミットID:B} とすれば コミットID:AからコミットID:B迄の差分となります。
git diff {ブランチ:A}..{ブランチ:B} とすれば ブランチ:Aとブランチ:B間の差分となります。
なので柔軟に変更点をブランチに適用出来ます。

要するに同一リポジトリであれば下記の様に反映元のブランチのHEADのコミットIDを確認してpatchを作れば確実に反映させることが出来るということ。
git switch {反映元のブランチ}
git diff {反映先のブランチのHEAD} > 変更.patch
git switch {反映先のブランチ}
git apply 変更.patch
