[docker docs](https://docs.docker.com/)
（[日本語](https://matsuand.github.io/docs.docker.jp.onthefly/)）

- 基本コマンド
    - build
    - run
- 実装ステップ
    - ベースにするイメージ
    - gitとvimが使えるイメージの作成
    - webサーバー
    - DBサーバー
    - 自由に

docker image build -t image-tag-name .

docker container run -dt --name container-name image-name
docker container ls -a
    - 短く書けないかな？
docker container rm container-name|container-id
    - 今日作ったものをまとめて削除できないかな？
docker exec -it container-name /bin/sh
    - runと同時に入れないかな？

try: CMDを使ってHello worldしてみよう
    RUNとCMDの違いは？
try: apt update, apt upgrade
try: ひとつのイメージから複数のコンテナを作ってみる
try: vim, git設定
try: node環境

ドキュメントを見ながらシンプルなコマンドを実行
    必須コマンドだけ紹介
慣れてきたらどんなオプションがあるのか眺めて使ってみる
コンテナ内でいろいろ導入できたらDockerfileで楽をする
    必要なソフトウェアを最初からインストールする（コマンドを実行してみる）

expressでAPIサーバー
docker run -dt --name express2 -p 3000:3000 -v $(pwd):/home/app mynode
```js
const express = require('express')
const app = express()

/**
 * サーバ起動
 */
const server = app.listen(8000, function () {
  console.log('Listening to port:' + server.address().port)
})

/**
 * GET /test
 */
app.get('/test', async function (req, res, next) {
  console.log('/test called')
  res.send('/test called')
})
```

--expose はコンテナ間通信をしてみる。-pは不要
docker run -dt --name express2 --expose 3000 -v $(pwd):/home/app mynode
/etc/hostsでip確認
curl使用

try: /etc/hostsをいじってみる

本来はバージョンやパッケージ管理を意識してインストールした方が良いが、Docker上なら壊れても問題ないのでどんどん試してみる
とにかく気になったら調べよう
手動で綺麗に削除してみる
大切なのはここに書いてあることをなぞるのではなく、自分から試すこと。

## docker compose でコマンド省略

| command | yaml |
| --- | --- |
| container run --name | container_name: |
| Dockerfile の指定 | `build:`<br />`  dockerfile: path`<br />`context: rootPath` |
| --publish | `ports:`<br />`  - hostPort:containerPort` |
| デフォルト命令 | command: |
| --env | environment:<br />  key: value |
| --mount | `volumes:`<br />`  - type: volume`<br />`    source: volumeName`<br />`    target: containerPath` |
| --mount | `volumes:`<br />`  - type: bind`<br />`    source: hostPath`<br />`    target: containerPath` |

| command | yaml |
| --- | --- |
|  | services: |
| volume create | volumes:<br />  volumeName: |
| network create / --network | 自動的に`services:`内の bridge ネットワークに接続 |

## 番外

```sh
docker image history <imageName>
```
