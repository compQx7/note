# Jest, React Testing Library

## DOMの確認

```js
// DOM確認
screen.debug();
screen.debug(renderedComponent);
// DOM全出力
screen.debug(undefined, 3000000);
console.log(prettyDOM(screen.getByTestId('dialog'), Infinity));
```

## DOM の取得

指定した要素以下で取得

```jsx
within(screen.getByTestId('r')).getByRole("button", { name: "save" });
```

参考

```jsx
const getRowAt = (at: number) => within(screen.get("table")).getAllByRole("row")[at];
```

## 既存関数の処理を変える

日付の固定例

```jsx
let datetimeUtilitySpy;
beforeEach(() => {
  // 今日を固定
  const today = DateTimeUtility2.parseApiDate('2024-01-09');
  datetimeUtilitySpy = jest.spyOn(DateTimeUtility2, 'today').mockReturnValue(today);
});
afterEach(() => {
  datetimeUtilitySpy.mockRestore();
});
```
